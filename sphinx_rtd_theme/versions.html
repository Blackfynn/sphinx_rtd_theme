<div> {{ versions }}</div>
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> </span>
    v: {{ version }}
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt id="blackfynn-versions-list">{{ _('Versions') }}</dt>
    </dl>
   </div>
</div>

<script type="text/javascript">
  function addVersionLink(version) {
    var versions = document.querySelector("#blackfynn-versions-list");
    var entry = document.createElement('dd');
    var link = document.createElement('a')
    link.textContent = version;
    link.href = 'http://docs.blackfynn.io/python/' + version;
    entry.appendChild(link);
    versions.appendChild(entry);
  }

  var url = 'https://pypi.org/pypi/blackfynn/json';
  var request = new XMLHttpRequest();
  request.open('GET', url);
  request.responseType = 'json';
  request.send();

  request.onload = function() {
    var releases = request.response.releases;
    addVersionLink('latest');
    Object.keys(releases).filter(function(v) {return v > '2.3.1'}).sort().reverse().forEach(function(versionNumber) {
      if (releases.hasOwnProperty(versionNumber)) {
        addVersionLink(versionNumber)
      }
    });
  }
</script>
