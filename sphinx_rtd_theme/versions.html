<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> </span>
    v: {{ version }}
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt id="blackfynn-version-list">{{ _('Versions') }}</dt>
    </dl>
   </div>
</div>

<script type="text/javascript">

  // Add a link to the given version of the documentation
  function addVersionLink(version) {
    var versions = document.querySelector("#blackfynn-version-list");
    var entry = document.createElement('dd');
    var link = document.createElement('a')
    link.textContent = version;
    link.href = '{{ root_url }}' + version;
    entry.appendChild(link);
    versions.appendChild(entry);
  }

  // Get version info from PyPi
  var request = new XMLHttpRequest();
  request.open('GET', '{{ pypi_url }}');
  request.responseType = 'json';
  request.send();

  request.onload = function() {
    addVersionLink('latest');
    Object.keys(request.response.releases).sort().reverse().forEach(function(version) {
      // versions older than 2.3.1 don't have documentation
      if (version > '2.3.1') {
        addVersionLink(version)
      }
    });
  }
</script>
